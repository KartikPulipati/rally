{% extends "rallyapp/base.html" %}
{% load static %}

{% block content %}
<h3>Welcome, <span id="username">{{ user.first_name }}</span></h3>
<br>
{% for message in messages %}
    {{ message.author }} {{ message.timestamp|date:"h:i A" }}
    <br>
    {{ message.message }}
    <br>
{% endfor %}

<div id="chat-log" class="h-100 w-100"></div><br>
<input id="chat-message-input" type="text" size="100"><br>
<input id="chat-message-submit" type="button" value="Send">
{% if user.is_mod %}
    <input id="start-poll" type="button" value="Start poll">
    <form method="POST" id="poll-form" style="display: none;" action="create-poll">
        {% csrf_token %}
        <input id="prompt" type="text" name="prompt" placeholder="Prompt">
        <br>
        Separate each new option with a new line:
        <br>
        <textarea id="poll-options" type="text" name="options">
        </textarea>
        <button type="submit">
            Create poll
        </button>
    </form>
{% endif %}
{% for poll in polls %}
    {% comment %} create a poll html template {% endcomment %}
    <div class="poll">
        <h4>{{ poll.prompt }}</h4>
        <div class="poll-choices">
            {% for choice in poll.choice_set.all %}
                <div class="poll-choice">
                    {{ choice.choice }} : {{ choice.votes }} Votes.
                    
                </div>
                <br>
            {% endfor %}
        </div>
    </div>
{% endfor %}
{{ room_name|json_script:"room-name" }}


<script src="{% static 'channelsapp/js/channels.js' %}"></script>
{% endblock %}